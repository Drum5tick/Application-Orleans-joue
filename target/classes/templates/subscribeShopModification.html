<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="fr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
    <link href="https://fonts.googleapis.com/css?family=Acme&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Acme|Roboto&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="../CSS/style.css">
    <link rel="stylesheet" href="../CSS/footer.css">
    <link rel="stylesheet" href="../CSS/navBar.css">
    <link rel="stylesheet" href="../CSS/toast.css">
    <link rel="stylesheet" href="../CSS/subscribeEditorModification.css">
    <title>Modification de votre inscription</title>
    <script>
    	var toastMsg = "[[${toastMsg}]]";
    	var table_quantity = "[[${registration.tablesQuantity}]]";
    </script>
</head>
<body>
	<header th:replace="navBar.html :: top"></header>
    <main class="subscribeEditorModification">   
       	<h1 class="text-center font-weight-bold mt-5" > Modification de votre inscription</br>
       		<span class="font-weight-normal" th:text="${event.name}"></span>
       	</h1>
       	<section id="myAgents" class="pt-3">
	        <hr id="agents" class="col-6 my-5 mx-auto" />
            <div class="container containerTitleStyle d-flex align-items-center">
				<svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="user-edit" class="svg-inline--fa fa-user-edit fa-w-20 col-2 titleSvg mb-5 mr-2" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><path fill="white" d="M224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h274.9c-2.4-6.8-3.4-14-2.6-21.3l6.8-60.9 1.2-11.1 7.9-7.9 77.3-77.3c-24.5-27.7-60-45.5-99.9-45.5zm45.3 145.3l-6.8 61c-1.1 10.2 7.5 18.8 17.6 17.6l60.9-6.8 137.9-137.9-71.7-71.7-137.9 137.8zM633 268.9L595.1 231c-9.3-9.3-24.5-9.3-33.8 0l-37.8 37.8-4.1 4.1 71.8 71.7 41.8-41.8c9.3-9.4 9.3-24.5 0-33.9z"></path></svg>
                <h2 class="col-sm-12 p-0 mb-5 title ml-2">Mes collaborateurs présents à l'évènement</h2>
            </div>
            <div class="fluid-container d-none d-lg-block">
                <div class="row justify-content-center col-sm-12 col-lg-9 mx-auto">
                    <div class="col-10 center-block">
                        <p class="tableAboveText">Ajouter ici les coordonnées des personnes de votre société présentes (ou qui représenteront votre société) lors de la manifestation.</p>
                    </div>
                    <div class="table-responsive">
                        <table class="table table-striped table-bordered card-custom align-items-center">
                            <thead class="theadAgent">
                                <tr>
                                    <th class="col-6 col-lg-3" scope="col">Nom</th>
                                    <th class="col-6 col-lg-3" scope="col">Prénom</th>
                                    <th class="col-4 col-lg-2" scope="col">Téléphone</th>
                                    <th class="col-6 col-lg-3" scope="col">Email</th>
                                    <th class="col-3 col-lg-1" scope="col">Action</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <form method="POST" th:action="@{/addShopRegistrationAgent#myAgents}">
                                        <td class="customTd"><input class="form-control input-sm border-top-0 border-left-1 border-bottom-1 border-right-0" type="text" id="firstname" name="firstname" placeholder="Nom *" required></td>
                                        <td><input class="form-control input-sm border-top-0 border-left-1 border-bottom-1 border-right-0" type="text" id="lastname" name="lastname" placeholder="Prénom *" required> </td>
                                        <td><input class="form-control input-sm border-top-0 border-left-1 border-bottom-1 border-right-0" type="tel" pattern="(0|\\+33|0033)[1-9][0-9]{8}" id="phone" name="phone" placeholder="Téléphone"> </td>
                                        <td><input class="form-control input-sm border-top-0 border-left-1 border-bottom-1 border-right-0" type="email" id="email" name="email" placeholder="Email"> </td>
                                        <input type="hidden" name="registrationId" th:value="${registration.id}">
                                        <input type="hidden" name="societyId" th:value="${society.id}">
                                        <td class="text-center align-middle">
                                            <button type="submit" class="svgActionAgent col-8">
                                                <svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="plus-circle" class="svg-inline--fa fa-plus-circle fa-w-16 agentSVG" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
                                                    <path d="M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm144 276c0 6.6-5.4 12-12 12h-92v92c0 6.6-5.4 12-12 12h-56c-6.6 0-12-5.4-12-12v-92h-92c-6.6 0-12-5.4-12-12v-56c0-6.6 5.4-12 12-12h92v-92c0-6.6 5.4-12 12-12h56c6.6 0 12 5.4 12 12v92h92c6.6 0 12 5.4 12 12v56z"></path>
                                                </svg>
                                            </button>
                                        </td>
                                    </form>
                                </tr>
                                <tr class="customTr" th:each="agentRegistration : ${agentsRegistration}">
                                    <form method="POST" th:action="@{/deleteShopRegistrationAgent#myAgents}">
                                        <input type="hidden" name="registrationId" th:value="${registration.id}">
                                        <input type="hidden" name="agentRegistrationId" th:value="${agentRegistration.id}">
                                        <td th:text="${agentRegistration.firstname}" class="pl-4"></td>
                                        <td th:text="${agentRegistration.lastname}" class="pl-4"></td>
                                        <td th:text="${agentRegistration.phone}" class="pl-4"> </td>
                                        <td th:text="${agentRegistration.email}" class="pl-4"></td>
                                        <td class="text-center align-middle">
                                            <button type="submit" class="svgActionAgentDelete col-8" onclick="return confirm('Etes-vous sûrs de vouloir supprimer cet animateur ?');">
                                                <svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="times-circle" class="svg-inline--fa fa-times-circle fa-w-16 agentSVG" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
                                                    <path d="M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm121.6 313.1c4.7 4.7 4.7 12.3 0 17L338 377.6c-4.7 4.7-12.3 4.7-17 0L256 312l-65.1 65.6c-4.7 4.7-12.3 4.7-17 0L134.4 338c-4.7-4.7-4.7-12.3 0-17l65.6-65-65.6-65.1c-4.7-4.7-4.7-12.3 0-17l39.6-39.6c4.7-4.7 12.3-4.7 17 0l65 65.7 65.1-65.6c4.7-4.7 12.3-4.7 17 0l39.6 39.6c4.7 4.7 4.7 12.3 0 17L312 256l65.6 65.1z"></path>
                                                </svg>
                                            </button>
                                        </td>
                                    </form>
                                </tr>                                
                            </tbody>
                        </table>
                    <p style="color:white;"class="col-lg-3 col-5 text-right pr-4 ml-auto mr-4 mt-2 requiredFieldInfo"><span class="requiredField">*</span> Champs obligatoires</p> 
                    </div>
                </div>
            </div>
            <div class="containerStyle col-11 d-block d-lg-none" th:each="agentRegistration : ${agentsRegistration}">
				<div class="card">
					<form class="row align-items-center justify-content-between card-header card-header-custom p-1 mx-auto" th:action="@{/deleteShopRegistrationAgent}" method="POST" >
						<h3 class="col-8 pl-2 p-0" th:text="|${agentRegistration.lastname} ${agentRegistration.firstname}|"></h3>
						<button type="submit" class="p-1 mx-2 svgActionAgentDelete">
	                        <svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="times-circle" class="svg-inline--fa fa-times-circle fa-w-16 agentSVG" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
	                            <path d="M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm121.6 313.1c4.7 4.7 4.7 12.3 0 17L338 377.6c-4.7 4.7-12.3 4.7-17 0L256 312l-65.1 65.6c-4.7 4.7-12.3 4.7-17 0L134.4 338c-4.7-4.7-4.7-12.3 0-17l65.6-65-65.6-65.1c-4.7-4.7-4.7-12.3 0-17l39.6-39.6c4.7-4.7 12.3-4.7 17 0l65 65.7 65.1-65.6c4.7-4.7 12.3-4.7 17 0l39.6 39.6c4.7 4.7 4.7 12.3 0 17L312 256l65.6 65.1z"></path>
	                        </svg>
	                    </button>
	                    <input type="hidden" name="registrationId" th:value="${registration.id}">
                        <input type="hidden" name="agentRegistrationId" th:value="${agentRegistration.id}">
                    </form>	
				</div>
				<div class="card-body">
					<p class="card-text" th:text="|Téléphone : ${agentRegistration.phone}|"></p>
					<p class="card-text" th:text="|Email : ${agentRegistration.email}|"></p>
				</div>					
			</div>
            <div class="containerStyle col-11 d-block d-lg-none">
				<div class="card">
					<div class="card-header">
						<h3>Ajouter ici les coordonnées des personnes de votre société présentes (ou qui représenteront votre société) lors de la manifestation.</h3>
					</div>
					<form class="card-body addAgentForm" th:action="@{/addShopRegistrationAgent#myAgents}" method="POST">
						<label for="firstname" class="col-12">Prénom <span class="requiredField">*</span></label>
						<input type="text" id="firstname"  name="firstname" class="col-12 agentInputs" required>
						<label for="lastname" class="col-12 mt-2">Nom <span class="requiredField">*</span></label>
						<input type="text" id="lastname"  name="lastname" class="col-12 agentInputs" required>
						<label for="phone" class="col-12 mt-2">Téléphone <span class="requiredField">*</span></label>
						<input type="text" id="phone"  name="phone" class="col-12 agentInputs">
						<label for="email" class="col-12 mt-2">Email <span class="requiredField">*</span></label>
						<input type="text" id="email"  name="email" class="col-12 agentInputs" required>
						<p class="col-lg-3 col-8 text-right pr-0 ml-auto mr-4 mt-2 requiredFieldInfo"><span class="requiredField">*</span> Champs obligatoires</p>
						<div class="row justify-content-center">
							<button type="submit" class="svgActionAgent mt-3">
		                        <svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="plus-circle" class="svg-inline--fa fa-plus-circle fa-w-16 agentSVG" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
		                            <path d="M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm144 276c0 6.6-5.4 12-12 12h-92v92c0 6.6-5.4 12-12 12h-56c-6.6 0-12-5.4-12-12v-92h-92c-6.6 0-12-5.4-12-12v-56c0-6.6 5.4-12 12-12h92v-92c0-6.6 5.4-12 12-12h56c6.6 0 12 5.4 12 12v92h92c6.6 0 12 5.4 12 12v56z"></path>
		                        </svg>
		                    </button>
	                    </div>
	                    <input type="hidden" name="registrationId" th:value="${registration.id}">
                        <input type="hidden" name="societyId" th:value="${society.id}">
					</form>	
				</div>
			</div>
        </section>
        <section class="pt-3" id="myRegistration"> 
        <hr class="col-6 my-5 mx-auto" />
            <div class="container containerTitleStyle d-flex align-items-center">
                <svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="store" class="svg-inline--fa fa-store fa-w-20 col-2 titleSvg mt-3 mb-4 mr-2" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 616 512"><path fill="white" d="M602 118.6L537.1 15C531.3 5.7 521 0 510 0H106C95 0 84.7 5.7 78.9 15L14 118.6c-33.5 53.5-3.8 127.9 58.8 136.4 4.5.6 9.1.9 13.7.9 29.6 0 55.8-13 73.8-33.1 18 20.1 44.3 33.1 73.8 33.1 29.6 0 55.8-13 73.8-33.1 18 20.1 44.3 33.1 73.8 33.1 29.6 0 55.8-13 73.8-33.1 18.1 20.1 44.3 33.1 73.8 33.1 4.7 0 9.2-.3 13.7-.9 62.8-8.4 92.6-82.8 59-136.4zM529.5 288c-10 0-19.9-1.5-29.5-3.8V384H116v-99.8c-9.6 2.2-19.5 3.8-29.5 3.8-6 0-12.1-.4-18-1.2-5.6-.8-11.1-2.1-16.4-3.6V480c0 17.7 14.3 32 32 32h448c17.7 0 32-14.3 32-32V283.2c-5.4 1.6-10.8 2.9-16.4 3.6-6.1.8-12.1 1.2-18.2 1.2z"></path></svg>
                <h2 class="col-sm-12 p-0 title my-5 ml-2" id="infos">Mes informations générales</h2>
            </div>
            <form method="post" th:action="@{/updateShopRegistration}" class="p-4 modifInfosForm col-11 col-lg-7 mx-auto" th:object="${registration}">
                <input type="hidden" name="eventId" th:value="${event.id}" disabled>
                <input type="hidden" id="userId" name="userId" th:value="${connectedUser.id}" disabled>
				<input type="hidden" id="registrationId" name="id" th:value="${registration.id}" />
                <div class="form-group">
                    <label for="tablesQuantity" th:text="|Nombre de tables souhaitées|"></label>
                    <input type="number" id="tablesQuantity" class="form-control w-25" name="tablesQuantity" th:value="${registration.tablesQuantity}">
                    <div id="table_error" class="table_error"></div>
                </div>
                <div class="form-group">
                    <label for="electricalSupplyNeed">Besoin d'un raccord au réseau éléctrique</label>
                    <div>
                        <label class="switch">
                            <input type="checkbox" id="electricalSupplyNeed" name="electricalSupplyNeed" th:checked="${registration.electricalSupplyNeed}">
                            <span class="slider round"></span>
                            <div class="switch_on">OUI</div>
                            <div class="switch_off">NON</div>
                        </label>
                    </div>
                </div>
                 <input type="hidden" id="saleOption" name="saleOption" value="true">
                 <input type="hidden" id="agent" name="agentProvided" value="true">
                <div class="form-group">
                    <label for="comments">Ajouter un commentaire</label>
                    <textarea id="comments" class="form-control comments" name="comments" th:text="${registration.comments}"></textarea>
                </div>
                <div id="costPreview" class="registration_cost text-center mt-4" th:text="|Coût de l'inscription : ${#numbers.formatDecimal(event.shopPrice, 0, 'COMMA', 2, 'COMMA')} €|"></div>
                <div class="form-group mt-4 mb-2 d-flex justify-content-center">

                    <button type="submit" id="submit-update" name="registration" class="btn btn-primary btn-update mb-3">Valider les modifications</button>
                </div>
            </form>
        </section>
        <div th:replace="toasts :: toats"></div>
    </main>
    <footer th:replace="footer :: bottom"></footer>
    <script src="https://code.jquery.com/jquery-3.4.1.js" integrity="sha256-WpOohJOqMqqyKL9FccASB9O0KwACQJpFTUBLTYOVvVU=" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>
    <script src="../JS/updateEditorRegistration.js"></script>
    <script src="../JS/picturePreview.js"></script>
    <script src="../JS/updateEditorRegistration.js"></script>
    <script src="../JS/main.js"></script>
</body>

</html>